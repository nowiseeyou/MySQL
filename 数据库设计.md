# MySql 建表规范 #

## 设计数据库表的时候所依据的规范，共三个规范（3NF） ##

1. 要求有主键，并且要求每个字段原子性不可再分
2. 要求所有非主键字段完全依赖主键，不能产生部分依赖
3. 所有非主键字段和主键之间不能产生依赖传递


### 第一范式 ###

数据库表中不能出现重复记录，每个字段是原子性的不能再分

### 第二范式 ###

第二范式是建立在第一范式基础上的，另外要求所有非主键字段完全依赖主键，不能产生部分依赖

### 第三范式 ###

建立在第二范式基础上，非主键字段不能传递依赖于主键字段（不要产生传递依赖）


## 几个经典设计 ##

**一对一：**

1. 第一种方案：分两张表存储，共享主键
2. 第二种方案：分两张表存储，外键唯一

**一对多：**

1. 分两张表存储，在多的一方添加外键，这个外键字段引用一的一方中的主键字段

**多对多：**

分三张表存储，在学生表中存储学生信息，在课程表中存储课程信息，在学生逃课表中存储学生和课程的关系信息。



**注意：** 实际开发中，数据库设计尽量遵循三范式，但是还是根据实际情况进行取舍，有时可能会拿冗余换速度，最终目的是要满足客户需求

## 外键 ##

在 student_table 表中，通过 class_id 的字段，可以把数据与另一张表(class_table)关联起来，这种列称为外键。

#### 创建外键 ####

	ALTER TABLE student_table
	ADD CONSTRAINT fk_class_id
	FOREIGN KEY (class_id)
	REFERENCES class_table(id)

其中，外键约束的名称	`fk_class_id` 可以随意，`FOREIGN KEY (class_id)` 指定了 `class_id` 作为外键，`REFERENCES class_table(id)` 指定了这个外键关联到 `class_table` 表的 `id` 列（即 `class_table` 表的主键）。

通过定义外键约束，关系数据库可以保证无法插入无效的数据。即 如果 `class_table`  表不存在 `id = 99` 的记录，`student_table` 就无法插入 `class_id = 99` 的记录。


由于外键约束会降低数据库的性能，大部分互联网应用程序为了追求速度，并不设置外键约束，而是仅靠应用程序自身来保持逻辑的正确性，这种情况下，`class_id` 仅仅是一个普通的列，只是他起到了外键的作用而已。